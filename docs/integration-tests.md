## Scenarios

| Number | Before | After |
| --- | --- | --- |
| 1 | Full sync setup with platform skills and conflicts. | Skills refactored into `.agents-common`, platform skills reference `@`, conflicts resolved by user choice. |
| 2 | `.claude` skills exists, `.codex` folder exists. | Auto-create `.codex/skills` without prompting, `@` reference generated. |
| 3 | No skills anywhere. | Exits without creating anything (e.g. no `.codex` or `.claude`) |
| 4 | `.codex` skills exists, no config, `.claude` missing; user declines folder creation. | skills and config created in `.agents-common`; `.codex/skills` refactored with `@` reference. `.claude/skills` not created |
| 5 | `.codex` skills exists, no config, `.claude` missing; user confirms folder creation. | skills and config created in `.agents-common`; `.codex/skills` refactored with `@` reference; `.claude/skills` created with `@` reference. |
| 6 | Only `.agents-common` + config exist. | Creates assistant directories and `@` reference skills. |
| 7 | Skills already refactored to `@` reference. All skills, (e.g. `.codex` and `.cline`) are equal | Second run shows no conflict. |
| 8 | Skills already refactored to `@` reference. Skills, (e.g. `.codex` and `.cline`) have different non CORE_FIELD (e.g. `model`) fields. | Second run shows no conflict; each platform keeps its model field. |
| 9 | Skills already refactored to `@`, one assistant has body out-of-sync from `.agents-common` on same skill. Platform body starts with `@` | Conflict resolution proposes "keep common (discard <platform>)" and "abort"  |
| 10 | Skills already refactored to `@`, N assistants have body out-of-sync from `.agents-common` on same skill. Platform bodies starts with `@` | Conflict resolution says "multiple conflicts on frontmatter fields", proposes "keep common (discard platform edits)" and "abort". Do not loop over conflicts for a same skill  |
| 11 | Skills already refactored to `@`, one assistant has body out-of-sync from `.agents-common` on same skill. Platform body do NOT start with `@` | Conflict resolution proposes "keep common (discard <platform>)", "keep <platform> (discard common)" and "abort"  |
| 12 | Skills already refactored to `@`, N assistants have body out-of-sync from `.agents-common` on same skill. Platform bodies do NOT start with `@` | Conflict resolution says "multiple conflicts on frontmatter fields", proposes "keep common (discard platform edits)" and "abort". Do not loop over conflicts for a same skill |
| 13 | Skills already refactored to `@`, one assistant has CORE_FIELD frontmatter field out-of-sync from `.agents-common` on same skill. | Conflict resolution proposes "keep common (discard <platform>)", "keep platform (discard <common>)" and "abort" |
| 14 | Skills already refactored to `@`, N assistants have has CORE_FIELD frontmatter field out-of-sync from `.agents-common` | Conflict resolution says "multiple conflicts on frontmatter fields", proposes "keep common (discard platform edits)" and "abort". Do not loop over conflicts for a same skill |
| 15 | Skills already refactored to `@`. One skill has both a CORE_FIELD frontmatter conflict and a body conflict. Platform body **starts with `@`**.                  | Conflict resolution proposes "keep common (discard platform edits)" and "abort". Selecting keep common updates platform frontmatter to match `.agents-common` and fixes the `@` reference; no option to keep platform body.       |
| 16 | Skills already refactored to `@`. One skill has both a CORE_FIELD frontmatter conflict and a body conflict. Platform body **does NOT start with `@`**.          | Conflict resolution proposes "keep common (discard platform edits)", "keep platform (discard common)", and "abort". Selection determines whether `.agents-common` or platform version becomes the source of truth.            |
| 17 | Skills already refactored to `@`. **Multiple skills** have both CORE_FIELD frontmatter conflicts and body conflicts. Platform bodies **start with `@`**.        | Conflict resolution iterates through each conflicting skill, offering **“keep common (discard platform edits)”** and **“abort”** per skill. No “keep platform” option is shown.                                                           |
| 18 | Skills already refactored to `@`. **Multiple skills** have both CORE_FIELD frontmatter conflicts and body conflicts. Platform bodies **do NOT start with `@`**. | Conflict resolution iterates through each conflicting skill, offering **“keep common (discard platform edits)”**, **“keep platform (discard common)”**, and **“abort”** per skill. Choices apply per skill; second run shows no conflict. |
